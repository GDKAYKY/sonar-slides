<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SonarQube Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Roboto:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/site.css">
    <script src="/static/script.js" defer></script>   

</head>
<body>
        <div class="main-frame"> 
            <header class="header">
                <div class="logo">
                      <img src="/static/image.svg" alt="Sonar Logo" />
                </div>
                
                <div class="dashboard-title">SonarQube Dashboard</div>
                <div class="dashboard-underline"></div>
                
                <!-- Campos de configuração -->
                <div class="config-container">
                    <div class="config-field">
                        <label for="componentInput">Component:</label>
                        <input type="text" id="componentInput" placeholder="Ex: Consultai.App" value="Consultai.App">
                    </div>
                    <div class="config-field">
                        <label for="metricKeysInput">Metric Keys:</label>
                        <input type="text" id="metricKeysInput" placeholder="Ex: bugs,vulnerabilities,code_smells" value="bugs,vulnerabilities,code_smells">
                    </div>
                    <button class="query-btn" id="queryBtn">Consultar</button>
                </div>
                
                <!-- Botão para abrir o menu de consulta -->
                <div class="advanced-query-container">
                    <button class="advanced-query-btn" id="openQueryMenuBtn">Consulta Avançada</button>
                </div>
                
                <div class="search-container">
                    <div class="search-state-layer">
                        <div class="search-icon-container">
                            <div class="search-icon-wrapper">
                                <div class="search-icon"></div>
                            </div>
                        </div>
                        <div class="search-content">
                            <input type="text" class="search-input" placeholder="Search..." id="searchInput">
                        </div>
                    </div>
                </div>
            </header>
            <aside class="right-sidebar">
                <h2 class="sidebar-title">SonarQube Metrics</h2>
                
                <div class="separator-line line-1"></div>
                <div class="bug-icon"></div>
                <div class="bug-count" id="bugCount">0</div>
                <div class="bug-label">Bugs</div>
                
                <div class="separator-line line-2"></div>
                
                <div class="vulnerability-icon"></div>
                <div class="vulnerability-count" id="vulnerabilityCount">0</div>
                <div class="vulnerability-label">Vulnerabilities</div>
                
                <div class="separator-line line-3"></div>
                
                <div class="code-smell-icon"></div>
                <div class="code-smell-count" id="codeSmellCount">0</div>
                <div class="code-smell-label">Code Smells</div>
                
                <div class="separator-line line-4"></div>
                
                <button class="export-button" id="exportBtn">Export to Excel</button>
                
                <!-- Informações adicionais -->
                <div class="info-container">
                    <div class="info-item">
                        <span class="info-label">Component:</span>
                        <span class="info-value" id="currentComponent">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Last Update:</span>
                        <span class="info-value" id="lastUpdate">-</span>
                    </div>
                </div>
            </aside>
        </div>

        <!-- Modal de Consulta Avançada -->
        <div class="modal" id="queryModal" aria-hidden="true" style="display:none;">
            <div class="modal-overlay" id="queryModalOverlay"></div>
            <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="queryModalTitle">
                <div class="modal-header">
                    <h3 id="queryModalTitle">Consulta Avançada</h3>
                    <button class="modal-close" id="closeQueryMenuBtn" aria-label="Fechar">✕</button>
                </div>
                <div class="modal-body">
                    <div class="modal-field-row">
                        <label for="advComponent">Component</label>
                        <input type="text" id="advComponent" placeholder="Ex: Consultai.App" value="Consultai.App" />
                    </div>
                    <div class="modal-field-row">
                        <label for="advMetricKeys">Metric Keys</label>
                        <input type="text" id="advMetricKeys" placeholder="bugs,vulnerabilities,code_smells" value="bugs,vulnerabilities,code_smells" />
                    </div>
                    <div class="modal-grid">
                        <div class="modal-field-row">
                            <label for="advFromDate">From (YYYY-MM-DD)</label>
                            <input type="date" id="advFromDate" />
                        </div>
                        <div class="modal-field-row">
                            <label for="advToDate">To (YYYY-MM-DD)</label>
                            <input type="date" id="advToDate" />
                        </div>
                    </div>
                    <div class="modal-grid">
                        <div class="modal-field-row">
                            <label for="advGroupBy">Group By</label>
                            <select id="advGroupBy">
                                <option value="month" selected>month</option>
                                <option value="week">week</option>
                                <option value="day">day</option>
                            </select>
                        </div>
                        <div class="modal-field-row">
                            <label for="advAgg">Aggregation</label>
                            <select id="advAgg">
                                <option value="last" selected>last</option>
                                <option value="avg">avg</option>
                                <option value="min">min</option>
                                <option value="max">max</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-field-row">
                        <label for="advCategories">Categories (comma-separated)</label>
                        <input type="text" id="advCategories" placeholder="bugs,code_smells,vulnerabilities" value="bugs,code_smells,vulnerabilities" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="modal-action" id="btnRunCurrent">Consultar Atuais</button>
                    <button class="modal-action secondary" id="btnRunHistory">Consultar Histórico</button>
                </div>
                <pre class="modal-result" id="advResult" style="display:none;"></pre>
            </div>
        </div>
</body>
</html>
